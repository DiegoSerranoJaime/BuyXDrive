<div *ngIf="form">
    <form [formGroup]="form">
      <div class="mb-3">
        <label for="name" class="form-label">Nombre</label>
        <div [ngClass]="{'input-group': data}">
          <input type="text" class="form-control" id="name" formControlName="name" [ngClass]="{'is-invalid': name.touched && name.invalid}">
          <button *ngIf="data" class="btn btn-primary" (click)="name.setValue(user.name)">
            <i class="fas fa-sync-alt"></i>
          </button>
        </div>
        <div class="text-danger" *ngIf="name.touched && name.invalid">
          <span *ngIf="name.hasError('required')">El nombre es requerido</span>
        </div>
      </div>
      <div class="mb-3">
        <label for="surname" class="form-label">Apellidos</label>
        <div [ngClass]="{'input-group': data}">
          <input type="text" class="form-control" id="surname" formControlName="surname" [ngClass]="{'is-invalid': surname.touched && surname.invalid}">
          <button *ngIf="data" class="btn btn-primary" (click)="surname.setValue(user.surname)">
            <i class="fas fa-sync-alt"></i>
          </button>
        </div>
        <div class="text-danger" *ngIf="surname.touched && surname.invalid">
          <span *ngIf="surname.hasError('required')">Los apellidos son requeridos</span>
        </div>
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Correo electrónico</label>
        <div [ngClass]="{'input-group': data}">
          <input type="email" class="form-control" id="email" formControlName="email" [ngClass]="{'is-invalid': email.touched && email.invalid}">
          <button *ngIf="data" class="btn btn-primary" (click)="email.setValue(user.email)">
            <i class="fas fa-sync-alt"></i>
          </button>
        </div>
        <div class="text-danger" *ngIf="email.touched && email.invalid">
          <span *ngIf="email.hasError('required')">El Email es requerido</span>
          <span *ngIf="email.hasError('pattern')">El Email introducido no tiene el formato correcto</span>
          <span *ngIf="email.hasError('emailRegistered')">El Email introducido ya está en uso</span>
        </div>
      </div>
      <div class="mb-3">
        <label for="password" class="form-label">Contraseña</label>
        <input type="password" class="form-control" id="password" formControlName="password" [ngClass]="{'is-invalid': password.touched && password.invalid}">
        <div class="text-danger" *ngIf="password.touched && password.invalid">
          <span *ngIf="password.hasError('required')">La contraseña es requerida</span>
          <span *ngIf="password.hasError('minlength')">La contraseña tiene una longitud mínima de 8 carácteres</span>
          <span *ngIf="password.hasError('maxlength')">La contraseña tiene una longitud máxima de 16 carácteres</span>
        </div>
      </div>
      <div class="mb-3">
        <label for="type" class="form-label">Tipo</label>
        <select class="form-select" [formControl]="userType" [ngClass]="{'is-invalid': userType.invalid && userType.touched}">
            <option disabled [selected]="!userType.value">Seleccione una opción</option>
            <option *ngFor="let data of userTypes" [ngValue]="data.id" [selected]="userType.value == data.type">{{data.name}}</option>
        </select>
        <div *ngIf="userType.invalid && userType.touched" class="text-danger">
          <span *ngIf="userType.hasError('required')">El tipo es requerido</span>
        </div>
      </div>
      <div class="mb-3" *ngIf="genders">
        <label for="gender" class="form-label">Género</label>
        <div class="row mx-1">
          <div class="form-check col-4" *ngFor="let gender of genders">
            <input class="form-check-input" type="radio" name="gender" formControlName="gender" [value]="gender.id" [checked]="data && gender.id === user.gender">
            <label class="form-check-label" for="flexRadioDefault1">
              {{gender.name}}
            </label>
          </div>
        </div>
        <div class="text-danger" *ngIf="gender.touched && gender.invalid">
          <span *ngIf="gender.hasError('required')">El género es requerido</span>
        </div>
      </div>
      <div class="mb-3">
        <label for="address" class="form-label">Dirección</label>
        <div [ngClass]="{'input-group': data}">
          <input type="text" class="form-control" id="address" formControlName="address" [ngClass]="{'is-invalid': address.touched && address.invalid}">
          <button *ngIf="data" class="btn btn-primary" (click)="address.setValue(user.address)">
            <i class="fas fa-sync-alt"></i>
          </button>
        </div>
        <div class="text-danger" *ngIf="address.touched && address.invalid">
          <span *ngIf="address.hasError('required')">La dirección es requerida</span>
        </div>
      </div>
      <div class="mb-3">
        <label for="phoneNumber" class="form-label">Número de teléfono</label>
        <div [ngClass]="{'input-group': data}">
          <input type="text" class="form-control" id="phoneNumber" formControlName="phoneNumber" [ngClass]="{'is-invalid': phoneNumber.touched && phoneNumber.invalid}">
          <button *ngIf="data" class="btn btn-primary" (click)="phoneNumber.setValue(user.phone_number)">
            <i class="fas fa-sync-alt"></i>
          </button>
        </div>
        <div class="text-danger" *ngIf="phoneNumber.touched && phoneNumber.invalid">
          <span *ngIf="phoneNumber.hasError('required')">El número de teléfono es requerido</span>
          <span *ngIf="phoneNumber.hasError('pattern')">El número de teléfono no tiene el formato correcto</span>
        </div>
      </div>
    </form>
  </div>