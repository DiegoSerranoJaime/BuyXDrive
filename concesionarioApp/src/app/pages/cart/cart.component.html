<div class="row d-flex flex-md-row flex-column-reverse py-4">
  <div class="col-12 col-lg-9">
    <div class="table-responsive">
      <table class="table table-hover text-center align-middle" *ngIf="products.length > 0; else noProducts">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Nombre</th>
            <th scope="col">Imagen</th>
            <th scope="col">Cantidad</th>
            <th scope="col">Precio</th>
            <th scope="col">Descuento</th>
            <th scope="col">Accion</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of products; index as i">
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ product.bname }} {{ product.mname }}</td>
            <td><img width="100px" [src]="product.image"></td>
            <td>
              <app-amount [amount]="product.amount" [product]="product.id" (update)="updateAmount($event)"></app-amount>
            </td>
            <td><span *ngIf="product.discount" class="text-decoration-line-through text-muted fs-6" [ngClass]="{'me-1': product.discount}">{{ product.price * product.amount | number:'.0-2' }}</span> {{ product.price * product.amount | discount:product.discount | number:'.0-2'  }}€</td>
            <td><div class="badge bg-primary">{{ product.discount }}%</div></td>
            <td><button type="button" class="btn btn-danger" (click)="deleteModal(product, i)"><i class="fas fa-trash"></i></button></td>
          </tr>
        </tbody>
      </table>
      <ng-template #noProducts>
        <div class="alert alert-info text-center" role="alert">
          No hay productos en el carrito
        </div>
      </ng-template>
    </div>
  </div>
  <div class="col-12 col-md">
    <div class="card shadow mx-0">
      <div class="card-body">
        <p class="d-flex justify-content-between">Precio: <span>{{ totalPrice | number:'.0-2'  }}€</span></p>
        <p class="d-flex justify-content-between">Descuento: <span>-{{ discountPrice | number:'.0-2' }}€</span></p>
        <hr>
        <p class="d-flex justify-content-between">Precio Final: <span>{{ totalPrice - discountPrice | number:'.0-2'  }}€</span></p>
        <div class="d-grid">
          <button type="button" class="btn btn-primary" (click)="buyProducts()" [disabled]="disableBuy()">Realizar Compra</button>
        </div>
      </div>
    </div>
  </div>
</div>
